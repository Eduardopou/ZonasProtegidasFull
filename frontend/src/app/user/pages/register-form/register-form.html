<app-header-page></app-header-page>
<app-back-button [floating]="true"></app-back-button>

<div class="login-container">
  <form [formGroup]="register_user_form" (ngSubmit)="post_register()">
    <h1>Crear Cuenta</h1>

    <div class="input-group">
      <label for="nombre">Nombre</label>
      <input formControlName="nombre" type="text" id="nombre" placeholder="Ingresa tu nombre" required
             [attr.aria-invalid]="register_user_form.get('nombre')?.invalid && register_user_form.get('nombre')?.touched">
      <!-- Mensajes de error de nombre -->
      @if (register_user_form.get('nombre')?.invalid && (register_user_form.get('nombre')?.dirty || register_user_form.get('nombre')?.touched)) {
        <div class="error-message-field">
          @if (register_user_form.get('nombre')?.hasError('required')) {
            <span>El nombre es obligatorio.</span>
          }
          @if (register_user_form.get('nombre')?.hasError('minlength')) {
            <span>El nombre debe tener al menos 3 caracteres.</span>
          }
        </div>
      }
    </div>

    <div class="input-group">
      <label for="email">Correo</label>
      <input formControlName="email" type="email" id="email" placeholder="Ingresa tu correo" required
             [attr.aria-invalid]="register_user_form.get('email')?.invalid && register_user_form.get('email')?.touched">
      <!-- Mensajes de error de email -->
      @if (register_user_form.get('email')?.invalid && (register_user_form.get('email')?.dirty || register_user_form.get('email')?.touched)) {
        <div class="error-message-field">
          @if (register_user_form.get('email')?.hasError('required')) {
            <span>El correo es obligatorio.</span>
          }
          @if (register_user_form.get('email')?.hasError('email')) {
            <span>Formato de correo incorrecto. (Ej: tu@correo.com)</span>
          }
        </div>
      }
    </div>

    <div class="input-group">
      <label for="password">Contraseña</label>
      <input formControlName="password" type="password" id="password" placeholder="Ingresa tu contraseña" required
             [attr.aria-invalid]="register_user_form.get('password')?.invalid && register_user_form.get('password')?.touched">
      <!-- Mensajes de error de contraseña -->
      @if (register_user_form.get('password')?.invalid && (register_user_form.get('password')?.dirty || register_user_form.get('password')?.touched)) {
        <div class="error-message-field">
          @if (register_user_form.get('password')?.hasError('required')) {
            <span>La contraseña es obligatoria.</span>
          }
          @if (register_user_form.get('password')?.hasError('minlength')) {
            <span>Contraseña demasiado corta. Debe incluir 8 caracteres y un número.</span>
          }
        </div>
      }
    </div>

    <div class="input-group">
      <label for="confirmPassword">Confirmar contraseña</label>
      <input formControlName="confirmPassword" type="password" id="confirmPassword" placeholder="Repite tu contraseña" required
             [attr.aria-invalid]="register_user_form.get('confirmPassword')?.invalid && register_user_form.get('confirmPassword')?.touched">
      <!-- Mensajes de error de confirmación -->
      @if (register_user_form.get('confirmPassword')?.invalid && (register_user_form.get('confirmPassword')?.dirty || register_user_form.get('confirmPassword')?.touched)) {
        <div class="error-message-field">
          @if (register_user_form.get('confirmPassword')?.hasError('required')) {
            <span>La confirmación es obligatoria.</span>
          }
          @if (register_user_form.get('confirmPassword')?.hasError('passwordsMismatch')) {
            <span>Las contraseñas no coinciden.</span>
          }
        </div>
      }
    </div>

    <button class="login-btn" type="submit">Registrarse</button>
  </form>

  <div class="extra-links">
    <p>¿Ya tienes cuenta? <a routerLink="/login">Inicia sesión</a></p>
  </div>
</div>